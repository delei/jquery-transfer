/*!
  jQuery Transfer v1.0.0
 * Licensed under the LGPL v3.0 license
 */
!function(e){function t(e,t){this.selector=e,this.options=t,this.sourceItemList=[],this.targetItemList=[]}t.prototype.init=function(){if("#"==this.options.source.substr(0,1))var t=e(this.options.source);else t=this.selector.find(this.options.source);if(t.length<0)throw new Error("the source selector not found");this.options.formName=t.attr("name");var n=this;t.find("option").each(function(){var t={};t.value=e(this).val(),t.text=e(this).text(),"selected"==e(this).attr("selected")?n.targetItemList.push(t):n.sourceItemList.push(t)})},e.fn.transfer=function(n){var a,s=e.extend({},e.fn.transfer.defaults,n);return this.each(function(){var n=new t(a=e(this),s);n.init();for(var r=e.fn.transfer.defaults.template.replace("{{name}}",n.options.formName).replace("{{sourceTitle}}",s.sourceTitle).replace("{{targetTitle}}",s.targetTitle).replace(/\{\{iconPrefix}}/g,s.iconPrefix).replace(/\{\{iconSearch}}/g,s.iconSearch).replace(/\{\{iconLeft}}/g,s.iconLeft).replace(/\{\{iconRight}}/g,s.iconRight).replace("{{sourceCount}}",n.sourceItemList.length).replace("{{targetCount}}",n.targetItemList.length),i=e(r),l="",c="",o=0;o<n.sourceItemList.length;o++)l+=s.itemTpl.replace(/\{\{value\}\}/g,n.sourceItemList[o].value).replace(/\{\{text\}\}/g,n.sourceItemList[o].text);for(o=0;o<n.targetItemList.length;o++)c+=s.itemTpl.replace(/\{\{value\}\}/g,n.targetItemList[o].value).replace(/\{\{text\}\}/g,n.targetItemList[o].text);i.find(".transfer-left-panel .transfer-panel-list").append(l),i.find(".transfer-right-panel .transfer-panel-list").append(c),a.html(i.html()),a.$hidden=e("#transfer-hidden"),a.$sourcePanel=a.find(".transfer-left-panel"),a.$targetPanel=a.find(".transfer-right-panel"),a.$filterInput=a.find(".transfer-panel-filter :input"),a.$sourceSelect=a.find(".transfer-left-panel .transfer-panel-list"),a.$targetSelect=a.find(".transfer-right-panel .transfer-panel-list"),a.$buttons=a.find(".transfer-buttons"),a.$addBtn=a.find(".btn-add-item"),a.$removeBtn=a.find(".btn-del-item"),a.$checkboxInput=a.find(".transfer-panel-body .checkbox-input :checkbox"),a.$checkAllInput=a.find(".transfer-panel-footer .checkbox-input :checkbox"),a._sourceItemList=[],a._targetItemList=[];var p=(a.find(".transfer-panel").innerHeight()-a.$buttons.innerHeight())/2;function f(t){var n;n=t.hasClass("transfer-left-panel")?a.$addBtn:a.$removeBtn;var s=t.find(".transfer-panel-body .checkbox-input :checkbox").length,r=t.find(".transfer-panel-body .transfer-panel-list :checkbox:checked").length;r>0?n.attr("disabled",!1):n.attr("disabled",!0);var i=[];a.$targetSelect.find(":checkbox").each(function(){i.push(e(this).val())}),a.$hidden.val(i.join(",")),t.find(".selected-count").text(r),t.find(".transfer-item-count").text(s)}return a.$buttons.css("marginTop",p),a.$filterInput.keyup(function(){var t=e(this).val(),n=e(this).parents(".transfer-panel").find(".transfer-panel-list");n.find(".transfer-panel-item").show(),""!=t&&n.find(".transfer-panel-item").each(function(){e(this).attr("data-text").indexOf(t)<0&&e(this).hide()})}),a.$checkAllInput.click(function(){var t=e(this).parents(".transfer-panel"),n=t.find(".transfer-panel-list .transfer-panel-item :checkbox");e(this).prop("checked")?n.attr("checked",!0):n.attr("checked",!1),f(t)}),a.on("click",".transfer-panel-body .checkbox-input :checkbox",function(){f(e(this).parents(".transfer-panel"))}),a.$addBtn.click(function(){var t=a.$sourcePanel.find(".transfer-panel-list .transfer-panel-item :checkbox:checked"),n="";t.each(function(){var t=e(this).parents(".transfer-panel-item");n+=t.prop("outerHTML"),t.remove()}),a.$targetSelect.append(n),f(a.$sourcePanel),f(a.$targetPanel)}),a.$removeBtn.click(function(){var t=a.$targetPanel.find(".transfer-panel-list .transfer-panel-item :checkbox:checked"),n="";t.each(function(){var t=e(this).parents(".transfer-panel-item");n+=t.prop("outerHTML"),t.remove()}),a.$sourceSelect.append(n),f(a.$targetPanel),f(a.$sourcePanel)}),a})},e.fn.transfer.defaults={template:'<div class="transfer">                 <input type="hidden" id="transfer-hidden" name="{{name}}">                 <div class="transfer-item pull-left ">                     <div class="transfer-panel transfer-left-panel">                         <p class="transfer-panel-header">{{sourceTitle}}</p>                         <div class="transfer-panel-body">                             <div class="transfer-panel-filter">                                 <i class="input-icon {{iconPrefix}} {{iconSearch}}"></i>                                 <input autocomplete="off" placeholder="请输入搜索内容" size="small" icon="search" type="text" rows="2" validateevent="true" class="input-inner">                             </div>                             <div class="checkbox-group transfer-panel-list is-filterable">                             </div>                         </div>                         <p class="transfer-panel-footer">                             <label>                                 <span class="checkbox-input pull-left">                                     <input type="checkbox" class="checkbox-inline" value="">                                 </span>                                 <span class="checkbox-label pull-left">已选 <span class="selected-count">0</span>/<span class="transfer-item-count">{{sourceCount}}</span> 项</span>                             </label>                         </p>                     </div>                 </div>                 <div class="transfer-item pull-left">                     <div class="transfer-buttons">                        <button type="button" disabled="disabled" class="btn btn-default btn-add-item"><span><i class="{{iconPrefix}} {{iconRight}}"></i></span></button>                        <button type="button" disabled="disabled" class="btn btn-default btn-del-item"><span><i class="{{iconPrefix}} {{iconLeft}}"></i></span></button>                     </div>                 </div>                 <div class="transfer-item pull-left">                     <div class="transfer-panel  transfer-right-panel">                         <p class="transfer-panel-header">{{targetTitle}}</p>                         <div class="transfer-panel-body">                             <div class="transfer-panel-filter">                                 <i class="input-icon {{iconPrefix}} {{iconSearch}}"></i>                                 <input autocomplete="off" placeholder="请输入搜索内容" size="small" icon="search" type="text" rows="2" validateevent="true" class="input-inner">                             </div>                             <div class="checkbox-group transfer-panel-list is-filterable">                             </div>                         </div>                         <p class="transfer-panel-footer">                             <label>                                 <span class="checkbox-input pull-left">                                     <input type="checkbox" class="checkbox-inline" value="">                                 </span>                                 <span class="checkbox-label pull-left">已选 <span class="selected-count">0</span>/<span class="transfer-item-count">{{targetCount}}</span> 项</span>                             </label>                         </p>                     </div>                 </div>            </div>',itemTpl:'<label class="transfer-panel-item" data-text="{{text}}" data-value="{{value}}">                       <span class="checkbox-input pull-left">                           <input type="checkbox" class="checkbox-inline" value="{{value}}">                       </span>                       <span class="checkbox-label pull-left">                           <span>{{text}}</span>                       </span>                   </label>',source:"select:first",sourceTitle:"列表1",target:"select:last",targetTitle:"列表2",iconPrefix:"glyphicon",iconSearch:"glyphicon-search",iconLeft:"glyphicon-arrow-left",iconRight:"glyphicon-arrow-right"}}(jQuery);